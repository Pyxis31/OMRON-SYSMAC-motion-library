<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>(*&#xD;
***********************************&#xD;
			FB_dx_Codeur_V2&#xD;
***********************************&#xD;
GP - Fevrier 2023&#xD;
**********************************&#xD;
Objet : &#xD;
- Le bloc transmet la vitesse / tour de scan du convoyeur&#xD;
- Gère le rollOver du modulo dans les deux sens de marche&#xD;
- Gère un modulo négatif et un modulo positif&#xD;
***********************************&#xD;
&#xD;
*)&#xD;
&#xD;
Max_Pos := ABS(Modulo_Max - Modulo_Min);&#xD;
&#xD;
// Calcul du dx &#xD;
Delta_X := Position - Mem_Position;&#xD;
Mem_Position := Position;&#xD;
&#xD;
// Cas du RollOver &#xD;
IF Delta_X &lt;(-Max_Pos/2) THEN&#xD;
	Delta_X := Delta_X + Max_Pos ;&#xD;
END_IF;&#xD;
IF Delta_X &gt; (Max_Pos/2) THEN&#xD;
	Delta_X := Delta_X - Max_Pos ;&#xD;
END_IF;&#xD;
&#xD;
IF Reverse THEN&#xD;
	Delta_X := -1.0 * Delta_X;&#xD;
END_IF;&#xD;
&#xD;
&#xD;
</Text></StructuredTextModel>